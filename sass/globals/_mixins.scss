
// ==========================================================================
// Color functions
// ==========================================================================

@function tint($color, $percent){
    @return mix(#fff, $color, $percent);
}


@function shade($color, $percent){
    @return mix(#000, $color, $percent);
}


//
// Based on the darkness / lightness of the test color, return a dark og light
// color.
//

@function color($test, $light, $dark) {
    @if lightness($test) < 60% {
        // if the text colour is a dark colour
        // we need a light text color
        @return $light;
    } @else {
        // else it must be light so we need
        // a darker text color
        @return $dark;
    }
}

@function darkenOrLighten($color) {
    @if lightness($color) < 60% {
        // if the text colour is a dark colour
        // we need a light text color

        $light: lighten($color, 15%);
        @return $light;
    } @else {
        // else it must be light so we need
        // a darker text color

        $dark: darken($color, 15%);
        @return $dark;
    }
}


@function dolp($color, $pct) {
    @if lightness($color) < 60% {
        // if the text colour is a dark colour
        // we need a light text color

        $light: lighten($color, $pct);
        @return $light;
    } @else {
        // else it must be light so we need
        // a darker text color

        $dark: darken($color, $pct);
        @return $dark;
    }
}


@function lodp($color, $pct) {
    @if lightness($color) < 60% {
        // if the text colour is a dark colour
        // we need a light text color

        $dark: darken($color, $pct);
        @return $light;
    } @else {
        // else it must be light so we need
        // a darker text color

        $light: lighten($color, $pct);
        @return $dark;
    }
}




// ==========================================================================
// CSS3 mixins
// ==========================================================================

// Mixin: Border-radius. Emmulates Compass-style.org border-radius mixin.
@mixin border-radius($radius: 5px) {
  -webkit-border-radius: $radius;
     -moz-border-radius: $radius;
      -ms-border-radius: $radius;
          border-radius: $radius;
}

// Mixin: Box-shadow. Emmulates Compass-style.org box-shadow mixin.
@mixin box-shadow($top: 0px, $left: 0px, $blur: 5px, $color: #333333, $inset:"") {
    -webkit-box-shadow: $top $left $blur $color #{$inset};
       -moz-box-shadow: $top $left $blur $color #{$inset};
            box-shadow: $top $left $blur $color #{$inset};
}






// ==========================================================================
// Panel and badge module mixin
// ==========================================================================

@mixin theme-alerts($original: #fff, $panel: true) {
    $color: #000;
    @if lightness($original) > 90% {
        $color: darken($original, 40%);
        $color: saturate($original, 40%);

        @if lightness($color) - lightness($original) < 20% {
            $color: darken($original, 20%);
        }
    } @else if lightness($original) < 45% {
        $color: lighten($original, 40%);
        $color: desaturate($original, 40%);

        @if lightness($color) - lightness($original) < 20% {
            $color: lighten($color, 20%);
        }
    } @else {
        $color: darken($original, 20%);
        $color: saturate($original, 20%);

        @if lightness($color) - lightness($original) < 20% {
            $color: darken($color, 20%);
        }
    }

    background-color: $original;
    border-color: dolp($original, 10%);
    color: $color;

    @if ($panel) {
        h1,h2,h3,h4,h5,h6,
        .h1,.h2,.h3,.h4,.h5,.h6 {
            color: $color;
        }

        .panel-footer,
        .panel-heading {
            border-color: dolp($original, 10%);
        }
    }

    a {
        color: $color;
        font-weight: bold;
        text-decoration: underline;
    }
}



// ==========================================================================
// Button module mixins
// ==========================================================================

@mixin theme-button($color:#000, $font:#fff) {
    border-color: darkenOrLighten($color);
    color: $font;
    background-color: $color;

    &:hover,
    &:focus {
        color: $font;
        background-color: dolp($color,5%);
    }

    &:active {
        color: $font;
        @include box-shadow(inset 0 2px 3px rgba(0,0,0,.15));
    }

    //
    // Disable styles
    //

    &.is-disabled,
    &:disabled {
        color: desaturate($font, 20%) !important;
        border-color: desaturate($color, 50%);
        background-color: desaturate($color, 50%);
    }
}


@mixin theme-button-icon($color: #000, $font: #fff) {
    > .fa {
        color: $font;
        background-color: dolp($color, 10%);
    }
    &:active > .fa {
        @include box-shadow(inset 0 2px 3px rgba(0,0,0,.15));
    }
    &:hover > .fa,
    &:focus > .fa {
        background-color: dolp($color, 20%);
        color: $font;
    }

    //
    // Disabled styles
    //

    &.is-disabled,
    &:disabled {
        border-color: desaturate($color, 50%);
        > .fa {
            background-color: desaturate($color, 40%) !important;;
        }
    }
}


